<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:t="http://www.tei-c.org/ns/1.0" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><title>Text formats and how to handle them</title><meta name="generator" content="Generated by TEISLIDY stylesheet"></meta><script src="https://www.w3.org/Talks/Tools/Slidy/slidy.js" type="text/javascript"></script><link rel="stylesheet" type="text/css" media="screen, projection" href="https://www.w3.org/Talks/Tools/Slidy/show.css"></link><link href="../css/egXMLhandling.css" rel="stylesheet" type="text/css"></link><link href="../css/tei.css" rel="stylesheet" type="text/css"></link></head><body class="simple" id="TOP"><div class="slide cover"><img src="media/logo.png" width="40%" style="float:left" alt="[Put logo here]" class="cover"></img><br clear="all"></br><h1>Text formats and how to handle them</h1><p>Lou Burnard Consulting</p></div><div class="slide"><h2>Silk purses and sow's ears</h2><ul><li class="item">Can you make a silk purse out of a sow's ear? <ul><li class="item">(or, in French, faire d'une buse un epervier)?</li><li class="item">(or, in Italian, la botte dà il vino che ha non si cava sangue da una rapa)</li><li class="item">or, maybe, in Russian, из говна конфетку не сделаешь </li></ul></li><li class="item">Documents come in many different formats, but these formats are usually intended to represent a common set of features.</li><li class="item">Given the right tools and a common set of features, we should be able to convert (transduce) from one format representing a given set of features to another representation using a different format.</li></ul><p class="box">Up to a point...</p></div><div class="slide"><h2>Semantic vs presentational features</h2><ul><li class="item">Some formats aim to capture semantic features of a document ("heading", "paragraph", "title") </li><li class="item">Others aim to specify the way a document should be formatted ("font size", "justification", "italic"...)</li><li class="item">and in many/most the distinction is not clear : for example, what does <span class="gi">&lt;p&gt;</span> mean in HTML? or <span class="gi">&lt;br&gt;</span> ?</li></ul></div><div class="slide"><h2>We are where we are</h2><p>Documents might come in... </p><ul><li class="item">so-called PVA -- plain text with no encoding</li><li class="item">plain text with esoteric codes</li><li class="item">Word or ODT : word processor formats</li><li class="item">(X)HTML or eBook : web formats</li><li class="item">Typesetting formats (inDesign, TeX...)</li><li class="item">XML or TEI-XML </li><li class="item">PDF </li></ul></div><div class="slide"><h2>Low hanging fruit...</h2><ul><li class="item">A PDF file preserves only the appearances of an original: you can (painfully sometimes) extract letters from it by clever programming, but it's usually quicker to just print it out, and put it through an OCR process</li><li class="item">A TEI-XML document should come with an ODD defining its use of the TEI vocabulary: use that to help you write an XSLT stylesheet to extract just the elements and attributes you want </li><li class="item">Plain text : as you've seen, it may be quite easy to add minimal TEI tagging, provided that the text is consistent in e.g. its use of linebreaks, whitespace, capitals, and other things that your regular expressions will be relying on</li></ul></div><div class="slide"><h2>Word or Libre Office vel sim</h2><ul><li class="item">These are in fact XML formats respecting (more or less) the OOXML standard ... up to a point</li><li class="item">A Word file is really a compressed archive, like a zip, containing numerous document fragments </li><li class="item">oXygen can unpack and transform the useful part into TEI for you</li><li class="item">Word <span class="term">styles</span> are preserved : so if they were used semantically in the original, converting them to semantic tagging is easy</li><li class="item">But there are always surprises...</li></ul></div><div class="slide"><h2>XHTML and friends</h2><ul><li class="item">HTML looks superficially like XML, but is not necessarily well-formed and rarely validated</li><li class="item">XHTML is an XML-conformant expression of HTML: use the invaluable <span class="ident">tidy</span> utility to generate it</li><li class="item">eBooks, like docx, are really compressed archives containing many different XHTML or other files </li><li class="item">The organization of an ebook is more or less well-standardized but because the focus of the encoding is snazzy presentation, there is much variation, for example in style names and behaviours</li></ul></div><div class="slide"><h2>Typesetting and other esoteric formats</h2><ul><li class="item">You may encounter legacy type-setting formats such as TeX or inDesign</li><li class="item">These formats represent the desired formatting of the text, but not (usually) its semantics </li><li class="item">Conversion from XML to these formats is useful and fairly straightforward (there is also a standard called DSSSL of relevance here); the reverse is not the case </li></ul><p class="box">Good luck!</p></div><div class="slide"><h2>Two essential technologies: regexp and xpath</h2><p>Regexp (regular expressions) allow you to specify <span class="term">patterns</span> which match strings of characters and manipulate the resulting matches </p><ul><li class="item"><code>xyz</code> : the string xyz</li><li class="item"><code>[xyz]</code> any one of the characters x y z</li><li class="item"><code>[\d+]</code> one or more digits</li><li class="item"><code>[\p{Lu}+]</code> one or more uppercase unicode characters</li></ul><p>Xpath is a standard syntax for matching parts of an XML tree in terms of its elements and attributes </p><ul><li class="item"><code>//p</code> : any <span class="gi">&lt;p&gt;</span> anywhere</li><li class="item"><code></code><code>//p[anchor] </code>: any <span class="gi">&lt;p&gt;</span> containing an <span class="gi">&lt;anchor&gt;</span></li><li class="item"><code>//p[@rend] </code> : any p with a <span class="att">rend</span> attribute</li><li class="item"><code>//p[starts-with(@rend,'Head')]</code> any p whose <span class="att">rend</span> attribute has a value starting with Head</li></ul><p>Regexp and xpath are both built-in to oXygen</p></div><div class="slide"><h2>Programming options</h2><p>If you have lots of texts in a specific arcane format, it is worth investing time and effort to translate them, using whatever tools are at your disposal. </p><p>A multi-stage path is usually easiest, e.g. </p><ul><li class="item">use tidy, or perl or python or whatever language you like to convert to well-formed xml</li><li class="item">use XSLT to convert arbitrary XML to TEI ELTeC</li></ul><p class="box">Remember: the computer should be doing the boring repetitive work, not you!</p></div></body></html>
