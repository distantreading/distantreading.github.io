<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:t="http://www.tei-c.org/ns/1.0" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><title>ELTeC Tutorial 3 : reprocessing Abbyy outputs</title><meta name="generator" content="Generated by TEISLIDY stylesheet"></meta><script src="https://www.w3.org/Talks/Tools/Slidy/slidy.js" type="text/javascript"></script><link rel="stylesheet" type="text/css" media="screen, projection" href="https://www.w3.org/Talks/Tools/Slidy/show.css"></link><link href="../css/egXMLhandling.css" rel="stylesheet" type="text/css"></link><link href="../css/tei.css" rel="stylesheet" type="text/css"></link></head><body class="simple" id="TOP"><div class="slide cover"><img src="media/logo.jpg" width="40%" style="float:left" alt="[Put logo here]" class="cover"></img><br clear="all"></br><h1>ELTeC Tutorial 3 : reprocessing Abbyy outputs</h1><p>Lou Burnard Consulting</p></div><div class="slide"><h2>Choosing your text</h2><p>Please begin by selecting a text you would like to work on, in a language which you are comfortable with handling. The following items are available in your Work/Novels folder: </p><div class="table"><table><tr class="data"><td rowspan="1" colspan="1" class="data">Language</td><td rowspan="1" colspan="1" class="data">Identifier</td><td rowspan="1" colspan="1" class="data">Author</td><td rowspan="1" colspan="1" class="data">Title</td><td rowspan="1" colspan="1" class="data">Wordcount</td></tr></table></div><p>Each file with extension .pdf contains a digitized representation of an original printed source, which has been processed by Abbyy OCR. Take a look at this to determine what metadata you can extract for use in the header of your file, and also to familiarize yourself with the basic structure of the text -- whether it has prefaces etc. </p><p>Use online resources (WorldCat, Wikipedia, etc.) to collect other required metadata, such as the fullname of the author, their dates, sex, etc. When you have this information, proceed to create a new document and a TEI Header The procedure to follow is described in detail in the <a class="link_ref" href="tutorial-hdr.html">Header Tutorial</a>.</p></div><div class="slide"><h2>Adding the text</h2><p>Each file with extension .abbyy.xml contains an XML representation of the results of the OCR procedure carried out by Abbyy. This representation is quite verbose and contains much information we don't need, but it is easy to translate it to a basic TEI form using an XSLT stylesheet. We won't be teaching you XSLT (a standard language for converting one XML document to another) but we have provided a suitable stylesheet for this task. In oXygen, the easiest way to use it is to set up a named <span class="q">‘transformation scenario’</span>; you only need to do this once. Follow this procedure:</p><ul><li class="item">In the <span class="ident">Document</span> menu, choose <span class="ident">Transformation</span> -&gt; <span class="ident">Configure Transformation Scenario(s)</span>, or type CTRL-SHIFT-C, or click the spanner icon (this one : <img src="../Graphics/spanner.png" alt="" class="graphic" style=" height:7mm;"></img>) on the toolbar.</li><li class="item">A list of available transformation scenarios is displayed. You probably don't have the abbyy2tei scenario yet, so click <span class="ident">new</span> at the bottom and select <span class="ident">Transformtion with XSLT</span> to create it.</li><li class="item">In the New scenario dialogue, first change the name of the scenario to <span class="ident">abbyy2tei</span></li><li class="item">Leave the content of the XML URL box unchanged </li><li class="item">The XSL URL box should be filled. Click the triangle to the right of the folder icon and select <span class="ident">Browse for local file</span></li><li class="item">Navigate to the file <span class="ident">abbyy2tei.xsl</span> (it is in th top level of your Work directory, select it, and click Open</li><li class="item">Click the <span class="ident">Output</span> tab and make sure that the <span class="ident">open in editor</span> box is checked</li></ul><p>Once you have created this scenario, you can use it as often as you like, with other XML files. You can also set it as the default scenario for a file. </p><ul><li class="item">Now open the abby.xml file of your choice in oXygen</li><li class="item">With this file open in the editor, click the big red triangle icon on the toolbar, type CTRL-SHIFT-T, or select Document -&gt; Transformation -&gt; Apply Transformation Scenario from the menu</li><li class="item">If you have set a default transformation, it will be applied; if not the <span class="ident">Transform with</span> dialog box appears. Select the <span class="ident">abby2tei</span> transformation you created earlier to associate it and then click the <span class="ident">Apply Associated</span> button.</li><li class="item">After a brief delay, you should see a much less richly tagged version of the text.</li></ul><p>Comparing this version with the PDF file you opened earlier, you can see that the tag <span class="gi">&lt;pb/&gt;</span> indicates the start of a new page in the original. Each line of the output corresponds with a typographic line in the source. Blocks of text are tagged with a <span class="gi">&lt;p&gt;</span> element, though not all of them are paragraphs. Where there was a non-textual image in the original, the <span class="gi">&lt;gap&gt;</span> element appears. And of course there are probably quite a few character recognition errors, especially if the original printed text was unclear or damaged.</p><p>There is no automatically generated tagging beyond this; we will therefore have to add it by hand. Refresh your memory about the basic structure of an ELTeC-0 text: any front matter, such as the titlepage or a preface, should be wrapped in a <span class="gi">&lt;front&gt;</span>, while the text itself should be contained by a <span class="gi">&lt;body&gt;</span> element, grouping containing <span class="gi">&lt;div&gt;</span> elements.</p><p>It's up to you how you do this. Here's a suggestion:</p><ul><li class="item">Type CTRL-A to select the whole text</li><li class="item">Type CTRL-E and surround the whole text with a <span class="gi">&lt;text&gt;</span> element.</li><li class="item">If you have front matter, insert a <span class="gi">&lt;front&gt;</span> element at the start of your <span class="gi">&lt;text&gt;</span></li><li class="item">Select the paragraphs making up the titlepage, correct them, and wrap them in a <span class="gi">&lt;div type="titlepage"&gt;</span> inside the <span class="gi">&lt;front&gt;</span></li><li class="item">Decide whether any other prefatory matter is authorial: if it is, wrap it in a <span class="gi">&lt;div type="liminal"&gt;</span>, also inside the <span class="gi">&lt;front&gt;</span>. If it isn't, remove it.</li><li class="item">Now add a <span class="gi">&lt;body&gt;</span> element to contain the rest of the text, and within it at least one <span class="gi">&lt;div&gt;</span></li></ul><p>At some point you will want to tidy up the text a little: you, but some things that would be easy to fix are: </p><ul><li class="item">end-of-line hyphenation (where a word is broken across a line) is indicated by the special character <code>¬</code>. This makes it easy to join words up again: use a regexp to remove all occurrences of <code>¬\n</code></li><li class="item">The <span class="gi">&lt;pb/&gt;</span> tag is followed by any running header or page number in the original source, tagged as a separate <span class="gi">&lt;p&gt;</span> element. You may think it worth writing another regexp to remove paragraphs containing only digits and spaces or uppercase letters to catch these, though be careful you don't remove real parts of the text.</li><li class="item">You may be able to detect chapter divisions using a regexp to search for specific words, as in the Polish texts, but this is not guaranteed. A text may not have any chapter divisions at all, in which case our schema requires you to wrap the whole thing in one <span class="gi">&lt;div
                                type="chapter"&gt;</span>.</li><li class="item">You may catch some recurrent OCR errors using the spell checker built into oXygen (remember to set the correct language : you will need to copy the appropriate spelling files from your Work/Spell directory to ~/.com.oxygenxml/spell)</li></ul><p>When you're reasonably happy with the transcription, type CTRL-A to select all of it and CTRL-C to copy it. Then return to the file in which you prepared your header, move the cursor to the appropriate point inside the <span class="gi">&lt;text&gt;</span> element, and type CTRL-V to paste it. Is the completed document valid? If not, fix it!</p></div></body></html>